var d=/\/v\d+\//,m=/\.(ai|avif|gif|png|webp|bmp|bw|djvu|dng|ps|ept|eps|eps3|fbx|flif|gif|glb|gltf|heif|heic|ico|indd|jpg|jpe|jpeg|jp2|wdp|jxr|hdp|obj|pdf|ply|png|psd|arw|cr2|svg|tga|tif|tiff|u3ma|usdz|webp|3g2|3gp|avi|flv|m3u8|ts|m2ts|mts|mov|mkv|mp4|mpeg|mpd|mxf|ogv|webm|wmv)$/i,g=/https?:\/\/(?<host>[^/]+)\/(?<cloudName>[^/]+)?\/?(?<assetType>image|images|video|videos|raw|files)\/(?<deliveryType>upload|fetch|private|authenticated|sprite|facebook|twitter|youtube|vimeo)?\/?(?<signature>s--([a-zA-Z0-9_-]{8}|[a-zA-Z0-9_-]{32})--)?\/?(?<transformations>(?:[^_/]+_[^,/]+,?\/?)*\/)*(?<version>v\d+|\w{1,2})\/(?<publicId>[^\s]+)$/,v=["images","videos","files"],y="res.cloudinary.com";function b(e){if(typeof e!="string")throw new Error("Failed to parse URL - Invalid src: Is not a string");if(!d.test(e))throw new Error("Failed to parse URL - Invalid src: Does not include version (Ex: /v1234/)");const[s,f]=e.split("?"),o=w(s);let u=s;o&&(u=s.replace(new RegExp(`${o}$`),""));const a=u.match(g),i=a?.groups?.transformations?.split("/").filter(n=>!!n),t={...a?.groups,format:o,seoSuffix:void 0,transformations:i||[],queryParams:{},version:a?.groups?.version?parseInt(a.groups.version.replace("v","")):void 0};if(t.host===y&&!t.cloudName)throw new Error("Failed to parse URL - Invalid src: Cloudinary URL delivered from res.cloudinary.com must include Cloud Name (ex: res.cloudinary.com/<Cloud Name>/image/...)");if(f&&(t.queryParams=f.split("&").reduce((n,p)=>{const[c,l]=p.split("=");return n[c]=l,n},{})),t.assetType&&v.includes(t.assetType)){const n=t.publicId?.split("/")||[];t.seoSuffix=n.pop(),t.publicId=n.join("/")}return t.publicId&&(t.publicId=decodeURIComponent(t.publicId)),t}function E(e){const{transformations:r=[]}=b(e)||{};return r.map(s=>s.split(","))}function w(e){const r=e.match(m);if(r!==null)return r[0]}async function h(e){try{const r=await fetch(e.src);return r.status===423?(await new Promise(s=>setTimeout(s,500)),await h(e)):r.ok}catch{return!1}}function I(e){return typeof e!="string"?!1:!!e.startsWith("#")}function R(e){return`rgb:${e.replace("#","")}`}function x(e){if(typeof btoa=="function")return btoa(e);if(typeof Buffer<"u")return Buffer.from(e).toString("base64")}function T(e,r){return Object.prototype.hasOwnProperty.call(e,r)}function U(e=[],r,s="asc"){function f(u,a){let i=u[r],t=a[r];return typeof i=="string"&&(i=i.toLowerCase()),typeof t=="string"&&(t=t.toLowerCase()),i<t?-1:i>t?1:0}let o=[...e];return o=o.sort(f),s==="desc"?o.reverse():o}export{w as a,h as b,R as c,x as e,E as g,T as o,b as p,U as s,I as t};
